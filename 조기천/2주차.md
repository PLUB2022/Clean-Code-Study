# 클린코드 2주차

# 5 장

# 형식 맞추기

### 형식을 맞춰야 하는 이유?

코드 형식 = 의사 소통

→ 코드의 스타일과 가독성은 다음 버젼에 지대한 영향을 미침

→ 원활한 소통을 위해 규칙을 정해야 함

# 장려하는 코드 규칙

## 1. 적절한 행 길이

- 일반적으로 큰 파일 보다 작은 파일이 이해하기 쉬움
- 신문 기사 처럼 이름은 간단하게, 설명이 가능하도록.
- 가독성이 좋게 빈 행을 넣어야 됨
    - 빈 행은 새로운 개념이 시작한다는 의미로.
- 밀집한 코드 행은 서로 가까이 배치 (연관성)

### 수직 거리

- 상속관계 등 조각이 나눠져 있는 경우 가까이 배치
    
    → protected 변수를 피해야 하는 이유
    
    : 내부 클래스 + 하위 클래스(다른 패키지 상속 관계) + 동일 패키지 
    

### **변수 선언**

: 사용하는 위치에 최대한 가까이 선언

### 인스턴스 변수

: 자바는 클래스 맨 처음 선언

: 변수 간에 세로로 거리를 두지 않음

c++ 에서는 가위 규칙을 적용 (c++ 에서는 모든 인스턴스 변수를 클래스 마지막에 선언)

[Scissors Rule in coding](https://blog.eq8.eu/article/scissors-rule-in-coding.html)

**→ 인스턴스 변수를 모은다는 사실이 중요!**

### 종속 함수

: 다른 함수를 호출하면 세로로 가까이 배치

: 호출되는 함수를 호출되는 함수보다 먼저 배치

### 개념의 유사성

: 비슷한 동작을 수행하는 것끼리 가까이 배치

: 중요한 개념을 표현할 때 세세한 사항을 최대한 배제

## 2. 가로 형식 맞추기

- 짧은 행을 선호
    - 저자는 120자 정도로 제한을 권고

- 공백 = 별개의 개념으로 인식
    - 연산자 우선순위 강조를 위해 공백을 넣기

- 가로 정렬은 X → 의도가 가려짐
- 들여쓰기는 필수
    - 간단한 것도 생략 X (if, while)

## 3. 팀 규칙

- 팀 끼리 한 가지 규칙에 합의해야 한다.
    
    → 일관적이여야 함 
    

# 6 장

# 자료 추상화

- 자료를 세세하게 공개 X
- 추상적인 개념으로 표현

### 자료/객체 비대칭

- 항상 객체 지향이 좋은 것이 아님!
- 객체 지향 코드와 절차적인 코드를 상황에 맞게 사용

### 디미터 법칙 (Law of Demeter [Appleton, LoD])

- 정보 은닉 강조
- 모듈은 자신이 조작하고 있는 객체의 속 사정을 몰라야 함
    - 조회 함수로 내부 구조를 공개 X

```
- 클래스 C의 메서드 f 는 다음과 같은 객체의 메서드만 호출해야 됨.

클래스 C

f가 생성한 객체

f 인수로 넘어온 객체

C 인스턴스 변수에 저장된 객체 
```

### 자료구조 vs 객체

- 자료구조
    - 무조건 함수 없이 공개 변수만 포함
    - 별다른 동작 없이 자료를 노출
    - 새로운 동작을 추가하는 경우 적합
    
- 객체
    - 비공개 변수와 공개 함수를 포함
    - 동작을 공개하고 자료를 숨김
    - 새로운 자료 타입을 추가 하는 경우 적합

### 자료 전달 객체 (DTO)

- 유용한 객체
- DB 통신 및 메시지 분석에 유용

- 활성 레코드
    - DTO에 특수한 형태
    - 비즈니스 로직이 있음
    
    → 객체로 취급보다는 자료구조로 사용할 것 
    

# 7 장

# 오류 처리

- 오류 처리는 필수 요소임
- 흩어진 오류 처리 코드 때문에 실제 코드가 하는 일이 파악하기 힘듦

→ 오류 처리를 신경써야 됨 

## 오류 코드 보다는 예외를 사용

### 1. Try-Catch-Finally 문 부터 작성

: 범위를 정의할 수 있음

: 일관성 있게 유지 가능

### 2. 미확인 예외를 사용

- 확인된 예외(Checked Exception)는 문제가 많음
- 하위 단계에서 코드를 변경하면 상위 단계 메서드 선언부도 고쳐야 됨 (OCP 위반)
    - 하위 함수를 변경해서 오류를 전달하면 선언부에서 throw 절을 추가해야 됨
- 캡슐화가 깨지고 불필요한 비용이 듦
    - 모든 함수가 최하위 함수에서 던지는 예외를 알아야 함

### 3. 예외에 의미를 제공

- 오류 메시지에 정보를 담아 예외와 함께 던지기

### 4. Wrapper 사용

- 외부 API를 감싸면 외부 라이브러리와 프로그램 사이에 의존성이 크게 줄어듦
- 특정 API를 설계한 방식에 발목 잡히지 않음.

### 5. null 전달, 반환 X

- null 을 반환하는 것 보단 빈 리스트를 반환 하기.